#!bin/sh
aws emr create-cluster --applications Name=Ganglia Name=Spark --ec2-attributes '{"KeyName":"aws","InstanceProfile":"EMR_EC2_DefaultRole","SubnetId":"subnet-1c2e086b","EmrManagedSlaveSecurityGroup":"sg-787b2e1c","EmrManagedMasterSecurityGroup":"sg-7e7b2e1a"}' --service-role EMR_DefaultRole --log-uri "s3://larsbk/logs/emr" --enable-debugging --release-label emr-4.3.0 --name 'spark'$(date +"%Y%m%d%H%M") --instance-groups '[{"InstanceCount":1,"BidPrice":"0.044","InstanceGroupType":"CORE","InstanceType":"m3.xlarge","Name":"Core instance group - 2"},{"InstanceCount":1,"BidPrice":"0.044","InstanceGroupType":"MASTER","InstanceType":"m3.xlarge","Name":"Master instance group - 1"}]' --configurations '[{"Classification":"spark","Properties":{"maximizeResourceAllocation":"true"},"Configurations":[]}]' --bootstrap-action Path="s3://larsbk/bootstrap/github-wget.sh" Path="s3://larsbk/bootstrap/pip-install.sh" --region eu-west-1